<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Player Dashboard | Your Game Space</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>

  <!-- AngularJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>


  <style>
    body {
      background-color: #f4f4f4;
    }

    .dashboard-container {
      max-width: 1200px;
      margin: 50px auto;
    }

    .card {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      border: none;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    .card-img-top {
      height: 180px;
      object-fit: cover;
      object-fit: contain;
    }

    h3 {
      font-weight: bold;
      color: #333;
    }
  </style>
  <script>
    var mymodule = angular.module("kuchModule", []);
    mymodule.controller("kuchController", function ($scope, $http) {
      $scope.doUpdatePassword = function () {
        
        var url = "/do-change-password?emailid=" + $scope.emailid + "&oldpass=" + $scope.oldpass + "&newpass=" + $scope.newpass;

        $http.get(url).then(allGoodFx, someBadFx);
        function allGoodFx(response) {
          alert(JSON.stringify(response.data));
        }

        function someBadFx(response) {
          alert(JSON.stringify(response.data));
        }

      };
    });
  </script>
 <script>
function showUser()
{
  let activeuser = localStorage.getItem("activeuser");
  document.getElementById("welcome").innerHTML=activeuser;
}
function showemail()
{
  let activeuser = localStorage.getItem("activeuser");
 document.getElementById("emailid").value=activeuser;
}
 function doLogout(){
  localStorage.removeItem("activeuser");
  location.href="index.html";
  alert("Logged Out Successfully. For Security Reasons, Pls exit this window.")
 }

</script>
</head>

<body ng-app="kuchModule" onload="showUser(),showemail()" ng-controller="kuchController" class="bg-light">


  <div class="container dashboard-container">
    <h3 class="text-center mb-5">Welcome:<span id="welcome">*</span></h3>
    <div class="row g-4 justify-content-center">

      <!-- Profile -->
      <div class="col-md-6 col-lg-3">
        <div class="card text-center">
          <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="card-img-top" alt="My Profile">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">My Profile</h5>
            <a href="/profile-player.html" class="btn btn-dark mt-auto">View Profile</a>
          </div>
        </div>
      </div>

      <!-- Tournaments -->
      <div class="col-md-6 col-lg-3">
        <div class="card text-center">
          <img src="PICS/TROPHEE.jpg" class="card-img-top" alt="Tournaments">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Tournaments</h5>
            <a href="/tournaments-finder.html" class="btn btn-dark mt-auto">Explore Tournaments</a>
          </div>
        </div>
      </div>

      <!-- Settings -->
      <div class="col-md-6 col-lg-3">
        <div class="card text-center">
          <img src="https://cdn-icons-png.flaticon.com/512/3524/3524636.png" class="card-img-top" alt="Settings Icon">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Change Your Password</h5>
            <a href="#" class="btn btn-dark mt-auto" data-bs-toggle="modal" data-bs-target="#changePassModal">Edit
              Settings</a>
          </div>
        </div>
      </div>


      <!-- Modal for password change -->
      <div class="modal fade" id="changePassModal" tabindex="-1" aria-labelledby="modalTitle" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content shadow">
            <div class="modal-header">
              <h5 class="modal-title" id="modalTitle">Update Password</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form>
                <div class="mb-3">
                  <label class="form-label">Email ID</label>
                 <input type="email" class="form-control" ng-model="emailid" id="emailid" required>



                </div>
                <div class="mb-3">
                  <label class="form-label">Old Password</label>
                  <input type="password" class="form-control" ng-model="oldpass" id="oldpass" required>
                </div>
                <div class="mb-3">
                  <label class="form-label">New Password</label>
                 <input type="password" class="form-control" ng-model="newpass" id="newpass" required>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-dark w-100" ng-click="doUpdatePassword()">Update Password</button>

            </div>
          </div>
        </div>
      </div>

      <!-- Logout -->
      <div class="col-md-6 col-lg-3">
        <div class="card text-center">
          <img src="https://cdn-icons-png.flaticon.com/512/1828/1828479.png" class="card-img-top" alt="Logout">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Logout</h5>
            <a href="#" class="btn btn-dark mt-auto" onclick="doLogout()">Log Out</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>